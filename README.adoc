= Human Resources Management System
Ansgar Nell <ansgar.nell@(Google's email).com>
1.0, March 30, 2020
:toc:
:icons: font

This document describes the Human Resources (HR) Management System developed based on the
https://dev.mysql.com/doc/employee/en/[Employees Sample Database] provided by https://www.mysql.com/[MySQL].
footnote:[The development of the project is explained in the Medium Article (will be linked when finished)]

== Introduction

The HR Management System development has been done as a request received by the Imaginary Company, which wants to
update their current MS-DOS based solution to a Web environment.

== Existing Database

The solution must be done taken into account that the database already exists. The company wishes to continue
working with it without doing a migration or losing any data, but it is possible to add new tables and information.
The schema can be seen in the next image:

[#database-schema]
.Database Schema
image::images/employees-database-schema.png[Employees Database Schema]

== Existing MS-DOS System

Our client currently works with a MS-DOS based system. This program will be used as an orientation for the new
project, having as the main goal to replicate the existing navigation options and operations.

== Requirements

=== Functional Requirements

Based on the specifications received from the client, we have the following functional requirements:

[#web-based-solution]
==== Web Based Solution

The application must be accessed using a web browser.

[#privilege-levels]
==== Privilege Levels

The employees who have access to the database must belong to only and exclusively one of the following levels:

[#privilege-levels-levels]
.Privilege levels (in descending order)
. HR Manager (Manager)
. HR Senior Staff (Senior Staff)
. HR Staff (Staff)

Every level must have all the permissions from the lower levels.

[#view-information]
==== View Information

All the information stored in the database is accessible, except for the next restrictions:

* Managers' salaries: only allowed to Senior Staff or higher.

As detailed in the indications about the navigation, the system sitemap must follow the next diagram:

ifdef::env-github[]
.Sitemap
image::/images/sitemap.png[Sitemap]
endif::env-github[]
ifndef::env-github[]
[plantuml,images/sitemap,png]
....
artifact departments
artifact employees
artifact employee as "employee information"
departments <-right-> employees
employees <-right-> employee
departments <-right-> employee : manager information
....
endif::env-github[]

[#change-information]
==== Change information

The only information that can be changed in the database are the salaries, and only Senior Staff
or higher levels are allowed to do it. Following restrictions apply:

* Managers' salaries: only the Manager level must be able to change this information.

=== Non-functional Requirements

== Used Technologies

.Used Technologies
|===
| Name | Version | Use

|https://spring.io/projects/spring-boot[Spring Boot]
|2.2.6.RELEASE
|Backend Implementation

|https://www.jetbrains.com/idea/[IntelliJ]
|2019.3.4 (Community Edition)
|Java IDE

|https://www.docker.com/[Docker]
|19.03.8
|Containerization

|https://asciidoctor.org/[Asciidoctor]
|2.0.10
|Documentation

|https://www.mysql.com/[MySQL]
|8.0.19
|Database

|https://angular.io/[Angular]
|9.1.0
|Frontend Implementation

|https://www.jetbrains.com/webstorm/[WebStorm]
|2019.3.4
|Angular IDE

|https://semantic-ui.com/[Semantic UI]
|2.2.13
|CSS Styling
|===

== System Design

The system will be developed using the Model-View-Controller (MVC) software design pattern.

.MVC pattern
.(taken from https://commons.wikimedia.org/wiki/File:MVC_Diagram_(Model-View-Controller).svg[Wikimedia Commons])
image::images/mvc-diagram.jpg[MVC Software Design Pattern]

=== Model

The original database schema can be seen in <<#database-schema>>.

NOTE: For the development, the entities names are in *singular* form, in order to avoid confusion when using a single
instance or several. So, the Employees tables is mapped to the Employee class, and so on. The plural form has been
maintained for other components like repositories or controllers. The same strategy has been followed in the frontend
implementation.

Let's analyze each of the tables and it contents.

[#department]
==== Department

The *Department* entity maps the *departments* table.

ifdef::env-github[]
.Department Schema
image::/images/department-schema.png[Department Schema]
endif::env-github[]
ifndef::env-github[]
[plantuml,images/department-schema,png]
....
entity Department {
    * deptNo : String
    --
    * deptName : String(40)
    managers : Set<DepartmentManager>
}
....
endif::env-github[]

[#employee]
==== Employee

The *Employee* entity maps the *employees* table.

ifdef::env-github[]
.Employee Schema
image::/images/employee-schema.png[Employee Schema]
endif::env-github[]
ifndef::env-github[]
[plantuml,images/employee-schema,png]
....
entity Employee {
    * empNo : Integer
    --
    * birthDate : Date
    * firstName : String(14)
    * lastName : String(16)
    * gender : ENUM('M','F')
    * hireDate : Date
    managerOf : Set<DepartmentManager>
}
....
endif::env-github[]

[#department-manager]
==== Department Manager

The *DepartmentManager* class implements the join table *dept_manager* between the table *departments* and its
current and past managers (table *employees*).

ifdef::env-github[]
.Department Managers Schema
image::/images/department-managers-schema.png[Department Managers Schema]
endif::env-github[]
ifndef::env-github[]
[plantuml,images/department-managers-schema,png]
....
entity DepartmentManager {
    * department : Department
    * employee : Employee
    --
    * fromDate : Date
    * toDate : Date
}
....
endif::env-github[]

=== Controller

Each entity has it's own controller, mapped to the corresponding path. Depending on the entity, it is also possible
to pass parameters to access to a specific information (for example, the detailed view of an employee passing his
employee number).

[#departments-controller]
==== Departments Controller

* Path: "/departments"
+
Returns the complete list of departments. Each department entry contains the same information as in the entity
<<#department>>.

* Path: "/departments/{id}"
+
Returns the following information corresponding to the department number _id_:

** The data contained in <<#department>>. Key _Department_.
** Information about the current and past managers. Key _Managers_.
*** Based in <<#employee>>:
**** Employee number
**** First name
**** Last name
*** Based in <<#department-manager>>:
**** From date
**** To date
** The complete list of employees,in the same format as in <<#employee>>. Key _Employees_.

[#employees-controller]
==== Employees Controller

* Path: "/employees"
+
Returns a list of employees, setting a default start and limit value. Each employee entry contains the same information
as in the entity <<#employee>>.

* Path: "/employees/{id}"
+
Returns the following information corresponding to the employee number _id_:

** The data contained in <<#employee>>
** If the employee is or has been a manager, information about the department and dates Key _Managed Departments_.
*** Based in <<#department>>:
**** Department number
**** Department name
*** Based in <<#department-manager>>:
**** From date
**** To date

=== View

The View part of the application is implemented using the Angular framework. The documentation can be consulted
https://github.com/AnsgarNell/HRToolFrontend[here].